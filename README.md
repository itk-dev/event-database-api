# Danish event database (version 2.x)

This is the next iteration of [the event database](https://github.com/itk-event-database/event-database-api) used by the
municipality of Aarhus.

This repository contains the frontend API, if you are looking for the event imports, the code is located
[here](https://github.com/itk-dev/event-database-imports).

The event database is an API platform for event aggregation from the public vendors throughout the cites. It gets data
mainly from feeds (JSON/XML) or APIs provided by the vendors. It is highly configurable in doing custom feed mappings
and extendable to read data from APIs and map this data to event. It also has a user interface to allow manual entering
of events.

The data input is pulled/pushed from a range of differently formatted sources and normalized into an event format that
can be used across platforms.

For more detailed and technical documentation, see the
[docs](https://github.com/itk-dev/event-database-imports/tree/develop/docs) folder in this repository.

## Record Architecture Decisions

This project utilizes record architecture decisions documents which can be located in
[https://github.com/itk-dev/event-database-imports/tree/develop/docs](https://github.com/itk-dev/event-database-imports/tree/develop/docs)
in this repository.

## Installation

```shell
docker compose up -d
docker compose exec phpfpm composer install
```

### Fixtures

The project comes with doctrine fixtures to help development on local machines. They can be loaded with the standard
doctrine fixture load command:

```shell
docker compose exec phpfpm bin/console app:fixtures:load
```

The fixtures are related to the backend where the fixtures are generated by using the `app:index:dump` command. The load
above command downloads the fixtures from
[GitHub](https://github.com/itk-dev/event-database-imports/tree/develop/src/DataFixtures/indexes) and loads them into
ElasticSearch.

### Production

When installing composer and Symfony based application in production, you should not install development packages,
hence use this command:

```shell
docker compose exec phpfpm composer install --no-dev --optimize-autoloader
```
